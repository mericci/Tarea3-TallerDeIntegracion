{"ast":null,"code":"var zrUtil = require(\"zrender/lib/core/util\");\n\nvar SymbolDraw = require(\"../../chart/helper/SymbolDraw\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar List = require(\"../../data/List\");\n\nvar markerHelper = require(\"./markerHelper\");\n\nvar MarkerView = require(\"./MarkerView\");\n\nfunction updateMarkerLayout(mpData, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  mpData.each(function (idx) {\n    var itemModel = mpData.getItemModel(idx);\n    var point;\n    var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n    var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n\n    if (!isNaN(xPx) && !isNaN(yPx)) {\n      point = [xPx, yPx];\n    } // Chart like bar may have there own marker positioning logic\n    else if (seriesModel.getMarkerPosition) {\n        // Use the getMarkerPoisition\n        point = seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions, idx));\n      } else if (coordSys) {\n        var x = mpData.get(coordSys.dimensions[0], idx);\n        var y = mpData.get(coordSys.dimensions[1], idx);\n        point = coordSys.dataToPoint([x, y]);\n      } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n\n    mpData.setItemLayout(idx, point);\n  });\n}\n\nvar _default = MarkerView.extend({\n  type: 'markPoint',\n  updateLayout: function (markPointModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mpModel = seriesModel.markPointModel;\n\n      if (mpModel) {\n        updateMarkerLayout(mpModel.getData(), seriesModel, api);\n        this.markerGroupMap.get(seriesModel.id).updateLayout(mpModel);\n      }\n    }, this);\n  },\n  renderSeries: function (seriesModel, mpModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var symbolDrawMap = this.markerGroupMap;\n    var symbolDraw = symbolDrawMap.get(seriesId) || symbolDrawMap.set(seriesId, new SymbolDraw());\n    var mpData = createList(coordSys, seriesModel, mpModel); // FIXME\n\n    mpModel.setData(mpData);\n    updateMarkerLayout(mpModel.getData(), seriesModel, api);\n    mpData.each(function (idx) {\n      var itemModel = mpData.getItemModel(idx);\n      var symbolSize = itemModel.getShallow('symbolSize');\n\n      if (typeof symbolSize === 'function') {\n        // FIXME 这里不兼容 ECharts 2.x，2.x 貌似参数是整个数据？\n        symbolSize = symbolSize(mpModel.getRawValue(idx), mpModel.getDataParams(idx));\n      }\n\n      mpData.setItemVisual(idx, {\n        symbolSize: symbolSize,\n        color: itemModel.get('itemStyle.normal.color') || seriesData.getVisual('color'),\n        symbol: itemModel.getShallow('symbol')\n      });\n    }); // TODO Text are wrong\n\n    symbolDraw.updateData(mpData);\n    this.group.add(symbolDraw.group); // Set host model for tooltip\n    // FIXME\n\n    mpData.eachItemGraphicEl(function (el) {\n      el.traverse(function (child) {\n        child.dataModel = mpModel;\n      });\n    });\n    symbolDraw.__keep = true;\n    symbolDraw.group.silent = mpModel.get('silent') || seriesModel.get('silent');\n  }\n});\n/**\n * @inner\n * @param {module:echarts/coord/*} [coordSys]\n * @param {module:echarts/model/Series} seriesModel\n * @param {module:echarts/model/Model} mpModel\n */\n\n\nfunction createList(coordSys, seriesModel, mpModel) {\n  var coordDimsInfos;\n\n  if (coordSys) {\n    coordDimsInfos = zrUtil.map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0]) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      info.name = coordDim;\n      return info;\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n\n  var mpData = new List(coordDimsInfos, mpModel);\n  var dataOpt = zrUtil.map(mpModel.get('data'), zrUtil.curry(markerHelper.dataTransform, seriesModel));\n\n  if (coordSys) {\n    dataOpt = zrUtil.filter(dataOpt, zrUtil.curry(markerHelper.dataFilter, coordSys));\n  }\n\n  mpData.initData(dataOpt, null, coordSys ? markerHelper.dimValueGetter : function (item) {\n    return item.value;\n  });\n  return mpData;\n}\n\nmodule.exports = _default;","map":{"version":3,"sources":["/home/martin/Escritorio/Taller de Integracion/Tarea3-TallerDeIntegracion/node_modules/react-echarts/node_modules/echarts/lib/component/marker/MarkPointView.js"],"names":["zrUtil","require","SymbolDraw","numberUtil","List","markerHelper","MarkerView","updateMarkerLayout","mpData","seriesModel","api","coordSys","coordinateSystem","each","idx","itemModel","getItemModel","point","xPx","parsePercent","get","getWidth","yPx","getHeight","isNaN","getMarkerPosition","getValues","dimensions","x","y","dataToPoint","setItemLayout","_default","extend","type","updateLayout","markPointModel","ecModel","eachSeries","mpModel","getData","markerGroupMap","id","renderSeries","seriesId","seriesData","symbolDrawMap","symbolDraw","set","createList","setData","symbolSize","getShallow","getRawValue","getDataParams","setItemVisual","color","getVisual","symbol","updateData","group","add","eachItemGraphicEl","el","traverse","child","dataModel","__keep","silent","coordDimsInfos","map","coordDim","info","getDimensionInfo","coordDimToDataDim","name","dataOpt","curry","dataTransform","filter","dataFilter","initData","dimValueGetter","item","value","module","exports"],"mappings":"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","sourcesContent":["var zrUtil = require(\"zrender/lib/core/util\");\n\nvar SymbolDraw = require(\"../../chart/helper/SymbolDraw\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar List = require(\"../../data/List\");\n\nvar markerHelper = require(\"./markerHelper\");\n\nvar MarkerView = require(\"./MarkerView\");\n\nfunction updateMarkerLayout(mpData, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  mpData.each(function (idx) {\n    var itemModel = mpData.getItemModel(idx);\n    var point;\n    var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n    var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n\n    if (!isNaN(xPx) && !isNaN(yPx)) {\n      point = [xPx, yPx];\n    } // Chart like bar may have there own marker positioning logic\n    else if (seriesModel.getMarkerPosition) {\n        // Use the getMarkerPoisition\n        point = seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions, idx));\n      } else if (coordSys) {\n        var x = mpData.get(coordSys.dimensions[0], idx);\n        var y = mpData.get(coordSys.dimensions[1], idx);\n        point = coordSys.dataToPoint([x, y]);\n      } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n\n    mpData.setItemLayout(idx, point);\n  });\n}\n\nvar _default = MarkerView.extend({\n  type: 'markPoint',\n  updateLayout: function (markPointModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mpModel = seriesModel.markPointModel;\n\n      if (mpModel) {\n        updateMarkerLayout(mpModel.getData(), seriesModel, api);\n        this.markerGroupMap.get(seriesModel.id).updateLayout(mpModel);\n      }\n    }, this);\n  },\n  renderSeries: function (seriesModel, mpModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var symbolDrawMap = this.markerGroupMap;\n    var symbolDraw = symbolDrawMap.get(seriesId) || symbolDrawMap.set(seriesId, new SymbolDraw());\n    var mpData = createList(coordSys, seriesModel, mpModel); // FIXME\n\n    mpModel.setData(mpData);\n    updateMarkerLayout(mpModel.getData(), seriesModel, api);\n    mpData.each(function (idx) {\n      var itemModel = mpData.getItemModel(idx);\n      var symbolSize = itemModel.getShallow('symbolSize');\n\n      if (typeof symbolSize === 'function') {\n        // FIXME 这里不兼容 ECharts 2.x，2.x 貌似参数是整个数据？\n        symbolSize = symbolSize(mpModel.getRawValue(idx), mpModel.getDataParams(idx));\n      }\n\n      mpData.setItemVisual(idx, {\n        symbolSize: symbolSize,\n        color: itemModel.get('itemStyle.normal.color') || seriesData.getVisual('color'),\n        symbol: itemModel.getShallow('symbol')\n      });\n    }); // TODO Text are wrong\n\n    symbolDraw.updateData(mpData);\n    this.group.add(symbolDraw.group); // Set host model for tooltip\n    // FIXME\n\n    mpData.eachItemGraphicEl(function (el) {\n      el.traverse(function (child) {\n        child.dataModel = mpModel;\n      });\n    });\n    symbolDraw.__keep = true;\n    symbolDraw.group.silent = mpModel.get('silent') || seriesModel.get('silent');\n  }\n});\n/**\n * @inner\n * @param {module:echarts/coord/*} [coordSys]\n * @param {module:echarts/model/Series} seriesModel\n * @param {module:echarts/model/Model} mpModel\n */\n\n\nfunction createList(coordSys, seriesModel, mpModel) {\n  var coordDimsInfos;\n\n  if (coordSys) {\n    coordDimsInfos = zrUtil.map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0]) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      info.name = coordDim;\n      return info;\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n\n  var mpData = new List(coordDimsInfos, mpModel);\n  var dataOpt = zrUtil.map(mpModel.get('data'), zrUtil.curry(markerHelper.dataTransform, seriesModel));\n\n  if (coordSys) {\n    dataOpt = zrUtil.filter(dataOpt, zrUtil.curry(markerHelper.dataFilter, coordSys));\n  }\n\n  mpData.initData(dataOpt, null, coordSys ? markerHelper.dimValueGetter : function (item) {\n    return item.value;\n  });\n  return mpData;\n}\n\nmodule.exports = _default;"]},"metadata":{},"sourceType":"script"}