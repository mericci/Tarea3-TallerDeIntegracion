{"ast":null,"code":"var zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _labelHelper = require(\"./labelHelper\");\n\nvar findLabelValueDim = _labelHelper.findLabelValueDim;\n/**\n * @module echarts/chart/helper/Symbol\n */\n\nfunction getSymbolSize(data, idx) {\n  var symbolSize = data.getItemVisual(idx, 'symbolSize');\n  return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n}\n\nfunction getScale(symbolSize) {\n  return [symbolSize[0] / 2, symbolSize[1] / 2];\n}\n/**\n * @constructor\n * @alias {module:echarts/chart/helper/Symbol}\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @extends {module:zrender/graphic/Group}\n */\n\n\nfunction SymbolClz(data, idx, seriesScope) {\n  graphic.Group.call(this);\n  this.updateData(data, idx, seriesScope);\n}\n\nvar symbolProto = SymbolClz.prototype;\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nsymbolProto._createSymbol = function (symbolType, data, idx, symbolSize) {\n  // Remove paths created before\n  this.removeAll();\n  var color = data.getItemVisual(idx, 'color'); // var symbolPath = createSymbol(\n  //     symbolType, -0.5, -0.5, 1, 1, color\n  // );\n  // If width/height are set too small (e.g., set to 1) on ios10\n  // and macOS Sierra, a circle stroke become a rect, no matter what\n  // the scale is set. So we set width/height as 2. See #4150.\n\n  var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, color);\n  symbolPath.attr({\n    z2: 100,\n    culling: true,\n    scale: getScale(symbolSize)\n  }); // Rewrite drift method\n\n  symbolPath.drift = driftSymbol;\n  this._symbolType = symbolType;\n  this.add(symbolPath);\n};\n/**\n * Stop animation\n * @param {boolean} toLastFrame\n */\n\n\nsymbolProto.stopSymbolAnimation = function (toLastFrame) {\n  this.childAt(0).stopAnimation(toLastFrame);\n};\n/**\n * FIXME:\n * Caution: This method breaks the encapsulation of this module,\n * but it indeed brings convenience. So do not use the method\n * unless you detailedly know all the implements of `Symbol`,\n * especially animation.\n *\n * Get symbol path element.\n */\n\n\nsymbolProto.getSymbolPath = function () {\n  return this.childAt(0);\n};\n/**\n * Get scale(aka, current symbol size).\n * Including the change caused by animation\n */\n\n\nsymbolProto.getScale = function () {\n  return this.childAt(0).scale;\n};\n/**\n * Highlight symbol\n */\n\n\nsymbolProto.highlight = function () {\n  this.childAt(0).trigger('emphasis');\n};\n/**\n * Downplay symbol\n */\n\n\nsymbolProto.downplay = function () {\n  this.childAt(0).trigger('normal');\n};\n/**\n * @param {number} zlevel\n * @param {number} z\n */\n\n\nsymbolProto.setZ = function (zlevel, z) {\n  var symbolPath = this.childAt(0);\n  symbolPath.zlevel = zlevel;\n  symbolPath.z = z;\n};\n\nsymbolProto.setDraggable = function (draggable) {\n  var symbolPath = this.childAt(0);\n  symbolPath.draggable = draggable;\n  symbolPath.cursor = draggable ? 'move' : 'pointer';\n};\n/**\n * Update symbol properties\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Object} [seriesScope]\n * @param {Object} [seriesScope.itemStyle]\n * @param {Object} [seriesScope.hoverItemStyle]\n * @param {Object} [seriesScope.symbolRotate]\n * @param {Object} [seriesScope.symbolOffset]\n * @param {module:echarts/model/Model} [seriesScope.labelModel]\n * @param {module:echarts/model/Model} [seriesScope.hoverLabelModel]\n * @param {boolean} [seriesScope.hoverAnimation]\n * @param {Object} [seriesScope.cursorStyle]\n * @param {module:echarts/model/Model} [seriesScope.itemModel]\n * @param {string} [seriesScope.symbolInnerColor]\n * @param {Object} [seriesScope.fadeIn=false]\n */\n\n\nsymbolProto.updateData = function (data, idx, seriesScope) {\n  this.silent = false;\n  var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n  var seriesModel = data.hostModel;\n  var symbolSize = getSymbolSize(data, idx);\n  var isInit = symbolType !== this._symbolType;\n\n  if (isInit) {\n    this._createSymbol(symbolType, data, idx, symbolSize);\n  } else {\n    var symbolPath = this.childAt(0);\n    symbolPath.silent = false;\n    graphic.updateProps(symbolPath, {\n      scale: getScale(symbolSize)\n    }, seriesModel, idx);\n  }\n\n  this._updateCommon(data, idx, symbolSize, seriesScope);\n\n  if (isInit) {\n    var symbolPath = this.childAt(0);\n    var fadeIn = seriesScope && seriesScope.fadeIn;\n    var target = {\n      scale: symbolPath.scale.slice()\n    };\n    fadeIn && (target.style = {\n      opacity: symbolPath.style.opacity\n    });\n    symbolPath.scale = [0, 0];\n    fadeIn && (symbolPath.style.opacity = 0);\n    graphic.initProps(symbolPath, target, seriesModel, idx);\n  }\n\n  this._seriesModel = seriesModel;\n}; // Update common properties\n\n\nvar normalStyleAccessPath = ['itemStyle', 'normal'];\nvar emphasisStyleAccessPath = ['itemStyle', 'emphasis'];\nvar normalLabelAccessPath = ['label', 'normal'];\nvar emphasisLabelAccessPath = ['label', 'emphasis'];\n/**\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Array.<number>} symbolSize\n * @param {Object} [seriesScope]\n */\n\nsymbolProto._updateCommon = function (data, idx, symbolSize, seriesScope) {\n  var symbolPath = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var color = data.getItemVisual(idx, 'color'); // Reset style\n\n  if (symbolPath.type !== 'image') {\n    symbolPath.useStyle({\n      strokeNoScale: true\n    });\n  }\n\n  var itemStyle = seriesScope && seriesScope.itemStyle;\n  var hoverItemStyle = seriesScope && seriesScope.hoverItemStyle;\n  var symbolRotate = seriesScope && seriesScope.symbolRotate;\n  var symbolOffset = seriesScope && seriesScope.symbolOffset;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel;\n  var hoverAnimation = seriesScope && seriesScope.hoverAnimation;\n  var cursorStyle = seriesScope && seriesScope.cursorStyle;\n\n  if (!seriesScope || data.hasItemOption) {\n    var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx); // Color must be excluded.\n    // Because symbol provide setColor individually to set fill and stroke\n\n    itemStyle = itemModel.getModel(normalStyleAccessPath).getItemStyle(['color']);\n    hoverItemStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n    symbolRotate = itemModel.getShallow('symbolRotate');\n    symbolOffset = itemModel.getShallow('symbolOffset');\n    labelModel = itemModel.getModel(normalLabelAccessPath);\n    hoverLabelModel = itemModel.getModel(emphasisLabelAccessPath);\n    hoverAnimation = itemModel.getShallow('hoverAnimation');\n    cursorStyle = itemModel.getShallow('cursor');\n  } else {\n    hoverItemStyle = zrUtil.extend({}, hoverItemStyle);\n  }\n\n  var elStyle = symbolPath.style;\n  symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n\n  if (symbolOffset) {\n    symbolPath.attr('position', [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])]);\n  }\n\n  cursorStyle && symbolPath.attr('cursor', cursorStyle); // PENDING setColor before setStyle!!!\n\n  symbolPath.setColor(color, seriesScope && seriesScope.symbolInnerColor);\n  symbolPath.setStyle(itemStyle);\n  var opacity = data.getItemVisual(idx, 'opacity');\n\n  if (opacity != null) {\n    elStyle.opacity = opacity;\n  }\n\n  var useNameLabel = seriesScope && seriesScope.useNameLabel;\n  var valueDim = !useNameLabel && findLabelValueDim(data);\n\n  if (useNameLabel || valueDim != null) {\n    graphic.setLabelStyle(elStyle, hoverItemStyle, labelModel, hoverLabelModel, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: useNameLabel ? data.getName(idx) : data.get(valueDim, idx),\n      isRectText: true,\n      autoColor: color\n    });\n  }\n\n  symbolPath.off('mouseover').off('mouseout').off('emphasis').off('normal');\n  symbolPath.hoverStyle = hoverItemStyle; // FIXME\n  // Do not use symbol.trigger('emphasis'), but use symbol.highlight() instead.\n\n  graphic.setHoverStyle(symbolPath);\n  var scale = getScale(symbolSize);\n\n  if (hoverAnimation && seriesModel.isAnimationEnabled()) {\n    var onEmphasis = function () {\n      var ratio = scale[1] / scale[0];\n      this.animateTo({\n        scale: [Math.max(scale[0] * 1.1, scale[0] + 3), Math.max(scale[1] * 1.1, scale[1] + 3 * ratio)]\n      }, 400, 'elasticOut');\n    };\n\n    var onNormal = function () {\n      this.animateTo({\n        scale: scale\n      }, 400, 'elasticOut');\n    };\n\n    symbolPath.on('mouseover', onEmphasis).on('mouseout', onNormal).on('emphasis', onEmphasis).on('normal', onNormal);\n  }\n};\n/**\n * @param {Function} cb\n * @param {Object} [opt]\n * @param {Object} [opt.keepLabel=true]\n */\n\n\nsymbolProto.fadeOut = function (cb, opt) {\n  var symbolPath = this.childAt(0); // Avoid mistaken hover when fading out\n\n  this.silent = symbolPath.silent = true; // Not show text when animating\n\n  !(opt && opt.keepLabel) && (symbolPath.style.text = null);\n  graphic.updateProps(symbolPath, {\n    style: {\n      opacity: 0\n    },\n    scale: [0, 0]\n  }, this._seriesModel, this.dataIndex, cb);\n};\n\nzrUtil.inherits(SymbolClz, graphic.Group);\nvar _default = SymbolClz;\nmodule.exports = _default;","map":{"version":3,"sources":["/home/martin/Escritorio/Taller de Integracion/Tarea3-TallerDeIntegracion/node_modules/react-echarts/node_modules/echarts/lib/chart/helper/Symbol.js"],"names":["zrUtil","require","_symbol","createSymbol","graphic","_number","parsePercent","_labelHelper","findLabelValueDim","getSymbolSize","data","idx","symbolSize","getItemVisual","Array","slice","getScale","SymbolClz","seriesScope","Group","call","updateData","symbolProto","prototype","driftSymbol","dx","dy","parent","drift","_createSymbol","symbolType","removeAll","color","symbolPath","attr","z2","culling","scale","_symbolType","add","stopSymbolAnimation","toLastFrame","childAt","stopAnimation","getSymbolPath","highlight","trigger","downplay","setZ","zlevel","z","setDraggable","draggable","cursor","silent","seriesModel","hostModel","isInit","updateProps","_updateCommon","fadeIn","target","style","opacity","initProps","_seriesModel","normalStyleAccessPath","emphasisStyleAccessPath","normalLabelAccessPath","emphasisLabelAccessPath","type","useStyle","strokeNoScale","itemStyle","hoverItemStyle","symbolRotate","symbolOffset","labelModel","hoverLabelModel","hoverAnimation","cursorStyle","hasItemOption","itemModel","getItemModel","getModel","getItemStyle","getShallow","extend","elStyle","Math","PI","setColor","symbolInnerColor","setStyle","useNameLabel","valueDim","setLabelStyle","labelFetcher","labelDataIndex","defaultText","getName","get","isRectText","autoColor","off","hoverStyle","setHoverStyle","isAnimationEnabled","onEmphasis","ratio","animateTo","max","onNormal","on","fadeOut","cb","opt","keepLabel","text","dataIndex","inherits","_default","module","exports"],"mappings":"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","sourcesContent":["var zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _labelHelper = require(\"./labelHelper\");\n\nvar findLabelValueDim = _labelHelper.findLabelValueDim;\n\n/**\n * @module echarts/chart/helper/Symbol\n */\nfunction getSymbolSize(data, idx) {\n  var symbolSize = data.getItemVisual(idx, 'symbolSize');\n  return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n}\n\nfunction getScale(symbolSize) {\n  return [symbolSize[0] / 2, symbolSize[1] / 2];\n}\n/**\n * @constructor\n * @alias {module:echarts/chart/helper/Symbol}\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @extends {module:zrender/graphic/Group}\n */\n\n\nfunction SymbolClz(data, idx, seriesScope) {\n  graphic.Group.call(this);\n  this.updateData(data, idx, seriesScope);\n}\n\nvar symbolProto = SymbolClz.prototype;\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nsymbolProto._createSymbol = function (symbolType, data, idx, symbolSize) {\n  // Remove paths created before\n  this.removeAll();\n  var color = data.getItemVisual(idx, 'color'); // var symbolPath = createSymbol(\n  //     symbolType, -0.5, -0.5, 1, 1, color\n  // );\n  // If width/height are set too small (e.g., set to 1) on ios10\n  // and macOS Sierra, a circle stroke become a rect, no matter what\n  // the scale is set. So we set width/height as 2. See #4150.\n\n  var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, color);\n  symbolPath.attr({\n    z2: 100,\n    culling: true,\n    scale: getScale(symbolSize)\n  }); // Rewrite drift method\n\n  symbolPath.drift = driftSymbol;\n  this._symbolType = symbolType;\n  this.add(symbolPath);\n};\n/**\n * Stop animation\n * @param {boolean} toLastFrame\n */\n\n\nsymbolProto.stopSymbolAnimation = function (toLastFrame) {\n  this.childAt(0).stopAnimation(toLastFrame);\n};\n/**\n * FIXME:\n * Caution: This method breaks the encapsulation of this module,\n * but it indeed brings convenience. So do not use the method\n * unless you detailedly know all the implements of `Symbol`,\n * especially animation.\n *\n * Get symbol path element.\n */\n\n\nsymbolProto.getSymbolPath = function () {\n  return this.childAt(0);\n};\n/**\n * Get scale(aka, current symbol size).\n * Including the change caused by animation\n */\n\n\nsymbolProto.getScale = function () {\n  return this.childAt(0).scale;\n};\n/**\n * Highlight symbol\n */\n\n\nsymbolProto.highlight = function () {\n  this.childAt(0).trigger('emphasis');\n};\n/**\n * Downplay symbol\n */\n\n\nsymbolProto.downplay = function () {\n  this.childAt(0).trigger('normal');\n};\n/**\n * @param {number} zlevel\n * @param {number} z\n */\n\n\nsymbolProto.setZ = function (zlevel, z) {\n  var symbolPath = this.childAt(0);\n  symbolPath.zlevel = zlevel;\n  symbolPath.z = z;\n};\n\nsymbolProto.setDraggable = function (draggable) {\n  var symbolPath = this.childAt(0);\n  symbolPath.draggable = draggable;\n  symbolPath.cursor = draggable ? 'move' : 'pointer';\n};\n/**\n * Update symbol properties\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Object} [seriesScope]\n * @param {Object} [seriesScope.itemStyle]\n * @param {Object} [seriesScope.hoverItemStyle]\n * @param {Object} [seriesScope.symbolRotate]\n * @param {Object} [seriesScope.symbolOffset]\n * @param {module:echarts/model/Model} [seriesScope.labelModel]\n * @param {module:echarts/model/Model} [seriesScope.hoverLabelModel]\n * @param {boolean} [seriesScope.hoverAnimation]\n * @param {Object} [seriesScope.cursorStyle]\n * @param {module:echarts/model/Model} [seriesScope.itemModel]\n * @param {string} [seriesScope.symbolInnerColor]\n * @param {Object} [seriesScope.fadeIn=false]\n */\n\n\nsymbolProto.updateData = function (data, idx, seriesScope) {\n  this.silent = false;\n  var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n  var seriesModel = data.hostModel;\n  var symbolSize = getSymbolSize(data, idx);\n  var isInit = symbolType !== this._symbolType;\n\n  if (isInit) {\n    this._createSymbol(symbolType, data, idx, symbolSize);\n  } else {\n    var symbolPath = this.childAt(0);\n    symbolPath.silent = false;\n    graphic.updateProps(symbolPath, {\n      scale: getScale(symbolSize)\n    }, seriesModel, idx);\n  }\n\n  this._updateCommon(data, idx, symbolSize, seriesScope);\n\n  if (isInit) {\n    var symbolPath = this.childAt(0);\n    var fadeIn = seriesScope && seriesScope.fadeIn;\n    var target = {\n      scale: symbolPath.scale.slice()\n    };\n    fadeIn && (target.style = {\n      opacity: symbolPath.style.opacity\n    });\n    symbolPath.scale = [0, 0];\n    fadeIn && (symbolPath.style.opacity = 0);\n    graphic.initProps(symbolPath, target, seriesModel, idx);\n  }\n\n  this._seriesModel = seriesModel;\n}; // Update common properties\n\n\nvar normalStyleAccessPath = ['itemStyle', 'normal'];\nvar emphasisStyleAccessPath = ['itemStyle', 'emphasis'];\nvar normalLabelAccessPath = ['label', 'normal'];\nvar emphasisLabelAccessPath = ['label', 'emphasis'];\n/**\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Array.<number>} symbolSize\n * @param {Object} [seriesScope]\n */\n\nsymbolProto._updateCommon = function (data, idx, symbolSize, seriesScope) {\n  var symbolPath = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var color = data.getItemVisual(idx, 'color'); // Reset style\n\n  if (symbolPath.type !== 'image') {\n    symbolPath.useStyle({\n      strokeNoScale: true\n    });\n  }\n\n  var itemStyle = seriesScope && seriesScope.itemStyle;\n  var hoverItemStyle = seriesScope && seriesScope.hoverItemStyle;\n  var symbolRotate = seriesScope && seriesScope.symbolRotate;\n  var symbolOffset = seriesScope && seriesScope.symbolOffset;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel;\n  var hoverAnimation = seriesScope && seriesScope.hoverAnimation;\n  var cursorStyle = seriesScope && seriesScope.cursorStyle;\n\n  if (!seriesScope || data.hasItemOption) {\n    var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx); // Color must be excluded.\n    // Because symbol provide setColor individually to set fill and stroke\n\n    itemStyle = itemModel.getModel(normalStyleAccessPath).getItemStyle(['color']);\n    hoverItemStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n    symbolRotate = itemModel.getShallow('symbolRotate');\n    symbolOffset = itemModel.getShallow('symbolOffset');\n    labelModel = itemModel.getModel(normalLabelAccessPath);\n    hoverLabelModel = itemModel.getModel(emphasisLabelAccessPath);\n    hoverAnimation = itemModel.getShallow('hoverAnimation');\n    cursorStyle = itemModel.getShallow('cursor');\n  } else {\n    hoverItemStyle = zrUtil.extend({}, hoverItemStyle);\n  }\n\n  var elStyle = symbolPath.style;\n  symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n\n  if (symbolOffset) {\n    symbolPath.attr('position', [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])]);\n  }\n\n  cursorStyle && symbolPath.attr('cursor', cursorStyle); // PENDING setColor before setStyle!!!\n\n  symbolPath.setColor(color, seriesScope && seriesScope.symbolInnerColor);\n  symbolPath.setStyle(itemStyle);\n  var opacity = data.getItemVisual(idx, 'opacity');\n\n  if (opacity != null) {\n    elStyle.opacity = opacity;\n  }\n\n  var useNameLabel = seriesScope && seriesScope.useNameLabel;\n  var valueDim = !useNameLabel && findLabelValueDim(data);\n\n  if (useNameLabel || valueDim != null) {\n    graphic.setLabelStyle(elStyle, hoverItemStyle, labelModel, hoverLabelModel, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: useNameLabel ? data.getName(idx) : data.get(valueDim, idx),\n      isRectText: true,\n      autoColor: color\n    });\n  }\n\n  symbolPath.off('mouseover').off('mouseout').off('emphasis').off('normal');\n  symbolPath.hoverStyle = hoverItemStyle; // FIXME\n  // Do not use symbol.trigger('emphasis'), but use symbol.highlight() instead.\n\n  graphic.setHoverStyle(symbolPath);\n  var scale = getScale(symbolSize);\n\n  if (hoverAnimation && seriesModel.isAnimationEnabled()) {\n    var onEmphasis = function () {\n      var ratio = scale[1] / scale[0];\n      this.animateTo({\n        scale: [Math.max(scale[0] * 1.1, scale[0] + 3), Math.max(scale[1] * 1.1, scale[1] + 3 * ratio)]\n      }, 400, 'elasticOut');\n    };\n\n    var onNormal = function () {\n      this.animateTo({\n        scale: scale\n      }, 400, 'elasticOut');\n    };\n\n    symbolPath.on('mouseover', onEmphasis).on('mouseout', onNormal).on('emphasis', onEmphasis).on('normal', onNormal);\n  }\n};\n/**\n * @param {Function} cb\n * @param {Object} [opt]\n * @param {Object} [opt.keepLabel=true]\n */\n\n\nsymbolProto.fadeOut = function (cb, opt) {\n  var symbolPath = this.childAt(0); // Avoid mistaken hover when fading out\n\n  this.silent = symbolPath.silent = true; // Not show text when animating\n\n  !(opt && opt.keepLabel) && (symbolPath.style.text = null);\n  graphic.updateProps(symbolPath, {\n    style: {\n      opacity: 0\n    },\n    scale: [0, 0]\n  }, this._seriesModel, this.dataIndex, cb);\n};\n\nzrUtil.inherits(SymbolClz, graphic.Group);\nvar _default = SymbolClz;\nmodule.exports = _default;"]},"metadata":{},"sourceType":"script"}