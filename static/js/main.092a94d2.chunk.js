(this.webpackJsonptarea3=this.webpackJsonptarea3||[]).push([[0],{309:function(e,t,a){e.exports=a(524)},314:function(e,t,a){},315:function(e,t,a){},345:function(e,t){},524:function(e,t,a){"use strict";a.r(t);var n=a(6),c=a.n(n),l=a(145),s=a.n(l),o=(a(314),a(169)),r=a(60),i=a(63),m=a(205),u=a(80),h=a(81),p=a(85),d=a(84),v=(a(315),a(96)),k=a(95),_=a(170),b=a(171);v.b(b.a),v.b(_.a);var E=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).boxRef=c.a.createRef(),n.state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=v.a(this.props.company,k.d);e.data=Object(o.a)(this.props.stock_data);var t=e.xAxes.push(new k.a);t.renderer.grid.template.location=0;var a=e.yAxes.push(new k.c);a.tooltip.disabled=!0,a.renderer.minWidth=35;var n=e.series.push(new k.b);n.dataFields.dateX="date",n.dataFields.valueY="value",n.tooltipText="{valueY} "+this.props.ticker.money,e.cursor=new k.e,e.cursor.xAxis=t,this.chart=e}},{key:"componentDidUpdate",value:function(e){console.log(this.props.stock_data),console.log(e.stock_data),this.props.stock_data!==e.stock_data&&(this.chart.data=this.props.stock_data)}},{key:"render",value:function(){return c.a.createElement("div",{id:this.props.company,style:{width:"100%",height:"300px"}})}}]),a}(n.Component),g=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={volume:0,big:0,small:0,last:0,variation:"0%"},n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e){if(this.props.prueba!==e.prueba&&this.setState({volume:this.props.volume,big:this.props.big,small:this.props.small,last:this.props.last}),this.props.last!==e.last){var t=Math.round((this.props.last-e.last)/e.last*1e4)/100;this.setState({variation:t+"%"})}}},{key:"render",value:function(){return c.a.createElement("div",{className:"ticker"},c.a.createElement("div",{className:"col-md-12 border-right company"},c.a.createElement("table",{className:"ticker-table"},c.a.createElement("tr",null,c.a.createElement("div",{className:"title-table"},c.a.createElement("h3",{className:"title-ticker"},this.props.ticker.company," ",c.a.createElement("span",{className:"ticker-company"},"(",this.props.ticker.ticker,")")),c.a.createElement("h5",{className:"country"},this.props.ticker.country))),c.a.createElement("tr",null,c.a.createElement("div",null,c.a.createElement(E,{key:this.props.ticker.company,data:this.props.ticker.update,time:this.props.ticker.update_time,title:this.props.ticker.company,company:this.props.ticker.company,prueba:this.props.prueba,ticker:this.props.ticker,stock_data:this.props.stock_data})),c.a.createElement("tr",null,c.a.createElement("th",null,"Volumen Total"),c.a.createElement("th",null,"Alto Hist\xf3rico"),c.a.createElement("th",null,"Bajo Hist\xf3rico"),c.a.createElement("th",null,"\xdaltimo Precio"),c.a.createElement("th",null,"Variaci\xf3n (%)")),c.a.createElement("tr",null,c.a.createElement("th",null,this.props.volume),c.a.createElement("th",null,this.state.big),c.a.createElement("th",null,this.state.small),c.a.createElement("th",null,this.state.last),c.a.createElement("th",null,this.state.variation))))))}}]),a}(n.Component),f=(n.Component,a(270)),x=a.n(f),y=a(119);v.b(b.a),v.b(_.a);var N=x()("wss://le-18262636.bitzonte.com",{path:"/stocks"}),j=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).set_exchanges=function(){N.emit("EXCHANGES"),N.on("EXCHANGES",(function(t){N.emit("STOCKS"),N.on("STOCKS",(function(a){e.state.is_loading||(Object.entries(t).map((function(e){var t=Object(m.a)(e,2);t[0];return t[1]})).map((function(t){e.setState({exchange_volume:Object(i.a)(Object(r.a)({},t.name,0),e.state.exchange_volume)}),t.listed_companies.map((function(n){a.map((function(a){e.setState({stock_data:Object(i.a)(Object(r.a)({},a.ticker,[]),e.state.stock_data)}),n===a.company_name&&e.setState({stock_exchange:Object(i.a)(Object(r.a)({},a.ticker,t.name),e.state.stock_exchange)})}))}))})),e.setState({exchanges:Object.entries(t).map((function(e){var t=Object(m.a)(e,2),n=(t[0],t[1]);return{name:n.name,exchange_ticker:n.exchange_ticker,stocks:n.listed_companies.map((function(e){var t="",n="",c="";return a.map((function(a){e===a.company_name&&(t=a.ticker,n=a.quote_base,c=a.country)})),{company:e,update:[],update_time:[],buy:[],sell:[],ticker:t,money:n,country:c}})),buy_volume:0,sell_volume:0}}))}),a.map((function(t){e.setState({big_updates:Object(i.a)(Object(r.a)({},t.ticker,0),e.state.big_updates),small_updates:Object(i.a)(Object(r.a)({},t.ticker,1/0),e.state.small_updates),last_updates:Object(i.a)(Object(r.a)({},t.ticker,0),e.state.last_updates),total_volume:Object(i.a)(Object(r.a)({},t.ticker,0),e.state.total_volume),buy_volume:Object(i.a)(Object(r.a)({},t.ticker,0),e.state.buy_volume),sell_volume:Object(i.a)(Object(r.a)({},t.ticker,0),e.state.sell_volume)})})));e.setState({is_loading:!0})}))}))},e.set_updates=function(){N.on("UPDATE",(function(t){if(e.state.is_loading){var a=e.state.stock_exchange[t.ticker],n=Object(i.a)({},e.state.stock_data),c=new Date;n[t.ticker].push({date:c.getHours()+":0"+c.getMinutes(),value:t.value}),e.setState({stock_data:n}),e.state.exchanges.map((function(e){e.name===a&&e.stocks.map((function(e){e.ticker===t.ticker&&e.update.push({date:t.time,value:t.value})}))})),e.state.last_updates[t.ticker]=t.value,t.value>e.state.big_updates[t.ticker]&&(e.state.big_updates[t.ticker]=t.value),t.value<e.state.small_updates[t.ticker]&&(e.state.small_updates[t.ticker]=t.value)}}))},e.set_buy=function(){N.on("BUY",(function(t){if(e.state.is_loading){var a=e.state.stock_exchange[t.ticker];isNaN(e.state.total_volume[t.ticker])&&(e.state.total_volume[t.ticker]=0),e.state.total_volume[t.ticker]+=t.volume,e.state.buy_volume[t.ticker]+=t.volume;a=e.state.stock_exchange[t.ticker];e.state.exchanges.map((function(e){e.name===a&&e.name===a&&(e.buy_volume+=t.volume)})),e.state.exchange_volume[a]+=t.volume,e.state.all_exchange_volume+=t.volume}}))},e.set_sell=function(){N.on("SELL",(function(t){if(e.state.is_loading){var a=e.state.stock_exchange[t.ticker];isNaN(e.state.total_volume[t.ticker])&&(e.state.total_volume[t.ticker]=0),e.state.total_volume[t.ticker]+=t.volume,e.state.sell_volume[t.ticker]+=t.volume;a=e.state.stock_exchange[t.ticker];e.state.exchanges.map((function(e){e.name===a&&(e.sell_volume+=t.volume)})),e.state.exchange_volume[a]+=t.volume,e.state.all_exchange_volume+=t.volume}}))},e.control_socket=function(){N.connected?(N.disconnect(),e.setState({button_text:"Reconectar Socket"})):(N.connect(),e.setState({button_text:"Desconectar Socket"}))},e.state={stock_exchange:{},exchanges:[],is_loading:!1,prueba:[],big_updates:{},small_updates:{},last_updates:{},total_volume:{},all_exchange_volume:0,buy_volume:{},sell_volume:{},exchange_volume:{},button_text:"Desconectar Socket",stock_data:{},stock_act:{}},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.set_exchanges(),this.set_updates(),this.set_buy(),this.set_sell()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"socket-control"},c.a.createElement("h2",null,"Tarea 3 - Taller de Integraci\xf3n"),c.a.createElement("button",{className:"button",onClick:this.control_socket},this.state.button_text)),this.state.exchanges.map((function(t){return c.a.createElement("div",{className:"exchange",key:t.name},c.a.createElement("div",{className:"exchange-map"},c.a.createElement("div",{className:"row exchange-title-info"},c.a.createElement("div",{className:"col-md-6 border-right title-exchange"},c.a.createElement("h1",null,t.name)),c.a.createElement("div",{className:"exchange_info col-md-6 border-left"},c.a.createElement("div",null,c.a.createElement("table",{className:"exchange-table"},c.a.createElement("tr",null,c.a.createElement("th",{className:"th-info-exchange"},"Volumen de compra"),c.a.createElement("th",{className:"th-info-exchange"},"Volumen de venta"),c.a.createElement("th",{className:"th-info-exchange"},"Volumen total"),c.a.createElement("th",{className:"th-info-exchange"},"Cantidad de acciones"),c.a.createElement("th",{className:"th-info-exchange"},"Participaci\xf3n de mercado")),c.a.createElement("tr",null,c.a.createElement("th",{className:"th-info-exchange"},t.buy_volume),c.a.createElement("th",{className:"th-info-exchange"},t.sell_volume),c.a.createElement("th",{className:"th-info-exchange"},e.state.exchange_volume[t.name]),c.a.createElement("th",{className:"th-info-exchange"},t.stocks.length),c.a.createElement("th",{className:"th-info-exchange"},Math.round(e.state.exchange_volume[t.name]/e.state.all_exchange_volume*1e4)/100)))))),c.a.createElement("div",{className:"table-ticker-div"},t.stocks.map((function(t){return c.a.createElement("div",{className:"ticker"},c.a.createElement("div",{className:"col-md-12 border-right company"},c.a.createElement("table",{className:"ticker-table"},c.a.createElement("tr",null,c.a.createElement("div",{className:"title-table"},c.a.createElement("h3",{className:"title-ticker"},t.company," ",c.a.createElement("span",{className:"ticker-company"},"(",t.ticker,")")),c.a.createElement("h5",{className:"country"},t.country))),c.a.createElement("tr",null,c.a.createElement("div",null,console.log(e.state.stock_data[t.ticker]),c.a.createElement("div",{id:"chart"},c.a.createElement(y.b,{width:820,height:300,data:Object(o.a)(e.state.stock_data[t.ticker])},c.a.createElement(y.d,{dataKey:"date",stroke:"azure"}),c.a.createElement(y.e,{stroke:"azure",domain:["dataMin-10","dataMax+10"]}),c.a.createElement(y.c,{formatter:function(e,a){return t.money+": "+e},labelFormatter:function(e){return"time: "+e}}),c.a.createElement(y.a,{type:"monotone",dataKey:"value",stroke:"cornflowerblue",fill:"cornflowerblue",strokeWidth:2})))),c.a.createElement("tr",null,c.a.createElement("th",null,"Volumen Total"),c.a.createElement("th",null,"Alto Hist\xf3rico"),c.a.createElement("th",null,"Bajo Hist\xf3rico"),c.a.createElement("th",null,"\xdaltimo Precio"),c.a.createElement("th",null,"Variaci\xf3n (%)")),c.a.createElement("tr",null,c.a.createElement("th",null,e.state.total_volume[t.ticker]),c.a.createElement("th",null,e.state.big_updates[t.ticker]),c.a.createElement("th",null,e.state.small_updates[t.ticker]),c.a.createElement("th",null,e.state.last_updates[t.ticker]),c.a.createElement("th",null,"0"))))))})))))})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[309,1,3]]]);
//# sourceMappingURL=main.092a94d2.chunk.js.map