(this.webpackJsonptarea3=this.webpackJsonptarea3||[]).push([[0],{309:function(e,t,a){e.exports=a(524)},314:function(e,t,a){},315:function(e,t,a){},345:function(e,t){},524:function(e,t,a){"use strict";a.r(t);var c=a(6),n=a.n(c),l=a(144),s=a.n(l),r=(a(314),a(168)),o=a(58),i=a(61),m=a(203),u=a(80),h=a(81),p=a(85),d=a(84),v=(a(315),a(170)),_=a(118),k=a(277),b=a(278);v.b(b.a),v.b(k.a);var E=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var c;return Object(u.a)(this,a),(c=t.call(this,e)).boxRef=n.a.createRef(),c.state={},c}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=v.a(this.props.company,_.d);e.data=Object(r.a)(this.props.stock_data);var t=e.xAxes.push(new _.a);t.renderer.grid.template.location=0;var a=e.yAxes.push(new _.c);a.tooltip.disabled=!0,a.renderer.minWidth=35;var c=e.series.push(new _.b);c.dataFields.dateX="date",c.dataFields.valueY="value",c.tooltipText="{valueY} "+this.props.ticker.money,e.cursor=new _.e,e.cursor.xAxis=t,this.chart=e}},{key:"componentDidUpdate",value:function(e){console.log(this.props.stock_data),console.log(e.stock_data),this.props.stock_data!==e.stock_data&&(this.chart.data=this.props.stock_data)}},{key:"render",value:function(){return n.a.createElement("div",{id:this.props.company,style:{width:"100%",height:"300px"}})}}]),a}(c.Component),g=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var c;return Object(u.a)(this,a),(c=t.call(this,e)).state={volume:0,big:0,small:0,last:0,variation:"0%"},c}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e){if(this.props.prueba!==e.prueba&&this.setState({volume:this.props.volume,big:this.props.big,small:this.props.small,last:this.props.last}),this.props.last!==e.last){var t=Math.round((this.props.last-e.last)/e.last*1e4)/100;this.setState({variation:t+"%"})}}},{key:"render",value:function(){return n.a.createElement("div",{className:"ticker"},n.a.createElement("div",{className:"col-md-12 border-right company"},n.a.createElement("table",{className:"ticker-table"},n.a.createElement("tr",null,n.a.createElement("div",{className:"title-table"},n.a.createElement("h3",{className:"title-ticker"},this.props.ticker.company," ",n.a.createElement("span",{className:"ticker-company"},"(",this.props.ticker.ticker,")")),n.a.createElement("h5",{className:"country"},this.props.ticker.country))),n.a.createElement("tr",null,n.a.createElement("div",null,n.a.createElement(E,{key:this.props.ticker.company,data:this.props.ticker.update,time:this.props.ticker.update_time,title:this.props.ticker.company,company:this.props.ticker.company,prueba:this.props.prueba,ticker:this.props.ticker,stock_data:this.props.stock_data})),n.a.createElement("tr",null,n.a.createElement("th",null,"Volumen Total"),n.a.createElement("th",null,"Alto Hist\xf3rico"),n.a.createElement("th",null,"Bajo Hist\xf3rico"),n.a.createElement("th",null,"\xdaltimo Precio"),n.a.createElement("th",null,"Variaci\xf3n (%)")),n.a.createElement("tr",null,n.a.createElement("th",null,this.props.volume),n.a.createElement("th",null,this.state.big),n.a.createElement("th",null,this.state.small),n.a.createElement("th",null,this.state.last),n.a.createElement("th",null,this.state.variation))))))}}]),a}(c.Component),f=(c.Component,a(268)),x=a.n(f),y=a(117),j=x()("wss://le-18262636.bitzonte.com",{path:"/stocks"}),N=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).set_exchanges=function(){j.emit("EXCHANGES"),j.on("EXCHANGES",(function(t){j.emit("STOCKS"),j.on("STOCKS",(function(a){e.state.is_loading||(Object.entries(t).map((function(e){var t=Object(m.a)(e,2);t[0];return t[1]})).map((function(t){e.setState({exchange_volume:Object(i.a)(Object(o.a)({},t.name,0),e.state.exchange_volume)}),t.listed_companies.map((function(c){a.map((function(a){e.setState({stock_data:Object(i.a)(Object(o.a)({},a.ticker,[]),e.state.stock_data)}),c===a.company_name&&e.setState({stock_exchange:Object(i.a)(Object(o.a)({},a.ticker,t.name),e.state.stock_exchange)})}))}))})),e.setState({exchanges:Object.entries(t).map((function(e){var t=Object(m.a)(e,2),c=(t[0],t[1]);return{name:c.name,exchange_ticker:c.exchange_ticker,stocks:c.listed_companies.map((function(e){var t="",c="",n="";return a.map((function(a){e===a.company_name&&(t=a.ticker,c=a.quote_base,n=a.country)})),{company:e,update:[],update_time:[],buy:[],sell:[],ticker:t,money:c,country:n}})),buy_volume:0,sell_volume:0}}))}),a.map((function(t){e.setState({big_updates:Object(i.a)(Object(o.a)({},t.ticker,0),e.state.big_updates),small_updates:Object(i.a)(Object(o.a)({},t.ticker,1/0),e.state.small_updates),last_updates:Object(i.a)(Object(o.a)({},t.ticker,0),e.state.last_updates),prev_last_updates:Object(i.a)(Object(o.a)({},t.ticker,0),e.state.prev_last_updates),total_volume:Object(i.a)(Object(o.a)({},t.ticker,0),e.state.total_volume),buy_volume:Object(i.a)(Object(o.a)({},t.ticker,0),e.state.buy_volume),sell_volume:Object(i.a)(Object(o.a)({},t.ticker,0),e.state.sell_volume)})})));e.setState({is_loading:!0})}))}))},e.set_updates=function(){j.on("UPDATE",(function(t){if(e.state.is_loading){var a=e.state.stock_exchange[t.ticker],c=Object(i.a)({},e.state.stock_data),n=new Date;n.getMinutes()<10?c[t.ticker].push({date:n.getHours()+":0"+n.getMinutes(),value:t.value}):c[t.ticker].push({date:n.getHours()+":"+n.getMinutes(),value:t.value}),e.setState({stock_data:c}),e.state.exchanges.map((function(e){e.name===a&&e.stocks.map((function(e){e.ticker===t.ticker&&e.update.push({date:t.time,value:t.value})}))})),e.state.prev_last_updates[t.ticker]=e.state.last_updates[t.ticker],e.state.last_updates[t.ticker]=t.value,t.value>e.state.big_updates[t.ticker]&&(e.state.big_updates[t.ticker]=t.value),t.value<e.state.small_updates[t.ticker]&&(e.state.small_updates[t.ticker]=t.value)}}))},e.set_buy=function(){j.on("BUY",(function(t){if(e.state.is_loading){var a=e.state.stock_exchange[t.ticker];isNaN(e.state.total_volume[t.ticker])&&(e.state.total_volume[t.ticker]=0),e.state.total_volume[t.ticker]+=t.volume,e.state.buy_volume[t.ticker]+=t.volume;a=e.state.stock_exchange[t.ticker];e.state.exchanges.map((function(e){e.name===a&&e.name===a&&(e.buy_volume+=t.volume)})),e.state.exchange_volume[a]+=t.volume,e.state.all_exchange_volume+=t.volume}}))},e.set_sell=function(){j.on("SELL",(function(t){if(e.state.is_loading){var a=e.state.stock_exchange[t.ticker];isNaN(e.state.total_volume[t.ticker])&&(e.state.total_volume[t.ticker]=0),e.state.total_volume[t.ticker]+=t.volume,e.state.sell_volume[t.ticker]+=t.volume;a=e.state.stock_exchange[t.ticker];e.state.exchanges.map((function(e){e.name===a&&(e.sell_volume+=t.volume)})),e.state.exchange_volume[a]+=t.volume,e.state.all_exchange_volume+=t.volume}}))},e.control_socket=function(){j.connected?(j.disconnect(),e.setState({button_text:"Reconectar Socket"})):(j.connect(),e.setState({button_text:"Desconectar Socket"}))},e.state={stock_exchange:{},exchanges:[],is_loading:!1,prueba:[],big_updates:{},small_updates:{},last_updates:{},prev_last_updates:{},total_volume:{},all_exchange_volume:0,buy_volume:{},sell_volume:{},exchange_volume:{},button_text:"Desconectar Socket",stock_data:{},stock_act:{}},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.set_exchanges(),this.set_updates(),this.set_buy(),this.set_sell()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"socket-control"},n.a.createElement("h2",null,"Tarea 3 - Taller de Integraci\xf3n"),n.a.createElement("button",{className:"button",onClick:this.control_socket},this.state.button_text)),this.state.exchanges.map((function(t){return n.a.createElement("div",{className:"exchange",key:t.name},n.a.createElement("div",{className:"exchange-map"},n.a.createElement("div",{className:"row exchange-title-info"},n.a.createElement("div",{className:"col-md-6 border-right title-exchange"},n.a.createElement("h1",null,t.name)),n.a.createElement("div",{className:"exchange_info col-md-6 border-left"},n.a.createElement("div",null,n.a.createElement("table",{className:"exchange-table"},n.a.createElement("tr",null,n.a.createElement("th",{className:"th-info-exchange"},"Volumen de compra"),n.a.createElement("th",{className:"th-info-exchange"},"Volumen de venta"),n.a.createElement("th",{className:"th-info-exchange"},"Volumen total"),n.a.createElement("th",{className:"th-info-exchange"},"Cantidad de acciones"),n.a.createElement("th",{className:"th-info-exchange"},"Participaci\xf3n de mercado")),n.a.createElement("tr",null,n.a.createElement("th",{className:"th-info-exchange"},t.buy_volume),n.a.createElement("th",{className:"th-info-exchange"},t.sell_volume),n.a.createElement("th",{className:"th-info-exchange"},e.state.exchange_volume[t.name]),n.a.createElement("th",{className:"th-info-exchange"},t.stocks.length),n.a.createElement("th",{className:"th-info-exchange"},Math.round(e.state.exchange_volume[t.name]/e.state.all_exchange_volume*1e4)/100)))))),n.a.createElement("div",{className:"table-ticker-div"},t.stocks.map((function(t){return n.a.createElement("div",{className:"ticker"},n.a.createElement("div",{className:"col-md-12 border-right company"},n.a.createElement("table",{className:"ticker-table"},n.a.createElement("tr",null,n.a.createElement("div",{className:"title-table"},n.a.createElement("h3",{className:"title-ticker"},t.company," ",n.a.createElement("span",{className:"ticker-company"},"(",t.ticker,")")),n.a.createElement("h5",{className:"country"},t.country))),n.a.createElement("tr",null,n.a.createElement("div",null,console.log(e.state.stock_data[t.ticker]),n.a.createElement("div",{id:"chart"},n.a.createElement(y.b,{width:820,height:300,data:Object(r.a)(e.state.stock_data[t.ticker])},n.a.createElement(y.d,{dataKey:"date",stroke:"azure"}),n.a.createElement(y.e,{stroke:"azure",domain:["dataMin-10","dataMax+10"]}),n.a.createElement(y.c,{formatter:function(e,a){return t.money+": "+e},labelFormatter:function(e){return"time: "+e}}),n.a.createElement(y.a,{dataKey:"value",stroke:"cornflowerblue",fill:"cornflowerblue",strokeWidth:2})))),n.a.createElement("tr",null,n.a.createElement("th",null,"Volumen Total"),n.a.createElement("th",null,"Alto Hist\xf3rico"),n.a.createElement("th",null,"Bajo Hist\xf3rico"),n.a.createElement("th",null,"\xdaltimo Precio"),n.a.createElement("th",null,"Variaci\xf3n (%)")),n.a.createElement("tr",null,n.a.createElement("th",null,e.state.total_volume[t.ticker]),n.a.createElement("th",null,e.state.big_updates[t.ticker]),n.a.createElement("th",null,e.state.small_updates[t.ticker]),n.a.createElement("th",null,e.state.last_updates[t.ticker]),0!==e.state.prev_last_updates[t.ticker]&&n.a.createElement("th",null,Math.round((e.state.last_updates[t.ticker]-e.state.prev_last_updates[t.ticker])/-e.state.prev_last_updates[t.ticker]*1e4)/100),0===e.state.prev_last_updates[t.ticker]&&n.a.createElement("th",null,"0"))))))})))))})),n.a.createElement("div",{className:"footer"}))}}]),a}(c.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[309,1,3]]]);
//# sourceMappingURL=main.7d3c4aaf.chunk.js.map