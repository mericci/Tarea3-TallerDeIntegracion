{"version":3,"sources":["components/Chart.jsx","components/TickerDetail.jsx","components/ExchangeDetail.jsx","App.js","serviceWorker.js","index.js"],"names":["am4core","am4themes_dark","am4themes_animated","Chart","props","boxRef","React","createRef","state","chart","this","company","am4charts","data","dateAxis","xAxes","push","renderer","grid","template","location","valueAxis","yAxes","tooltip","disabled","minWidth","series","dataFields","dateX","valueY","tooltipText","ticker","money","cursor","xAxis","prevProps","prueba","id","style","width","height","Component","TickerDetail","volume","big","small","last","variation","setState","porc_var","Math","round","className","country","key","update","time","update_time","title","ExchangeDetail","buy_volume","sell_volume","total_volume","actions_count","participation","exchange","name","exchange_volume","stocks","length","map","bigs","smalls","lasts","socket","io","path","App","control_socket","connected","disconnect","button_text","connect","stock_exchange","exchanges","is_loading","big_updates","small_updates","last_updates","all_exchange_volume","emit","on","stocks_info","Object","entries","listed_companies","comp","stock","company_name","value","exchange_ticker","tick","quote_base","buy","sell","Infinity","exchange_input","date","isNaN","onClick","Boolean","window","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.89f8ffb5.chunk.js","sourcesContent":["import React, {Component} from 'react';\n\nimport ReactEcharts from 'echarts-for-react';\nimport echarts from 'echarts/lib/echarts';\n\nimport * as am4core from \"@amcharts/amcharts4/core\";\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\nimport am4themes_dark from \"@amcharts/amcharts4/themes/dark\";\n\nam4core.useTheme(am4themes_dark);\nam4core.useTheme(am4themes_animated);\n\n\nclass Chart extends Component {\n    constructor(props){\n        super(props);\n        this.boxRef = React.createRef();\n        this.state = {\n\n        };    \n    };\n\n    componentDidMount() {\n        let chart = am4core.create(this.props.company, am4charts.XYChart);\n        \n        chart.data = this.props.data;\n\n\n        let dateAxis = chart.xAxes.push(new am4charts.DateAxis());\n        dateAxis.renderer.grid.template.location = 0;\n    \n        let valueAxis = chart.yAxes.push(new am4charts.ValueAxis());\n        valueAxis.tooltip.disabled = true;\n        valueAxis.renderer.minWidth = 35;\n    \n        let series = chart.series.push(new am4charts.LineSeries());\n        series.dataFields.dateX = \"date\";\n        series.dataFields.valueY = \"value\";\n        series.tooltipText = \"{valueY} \" + this.props.ticker.money;\n\n        chart.cursor = new am4charts.XYCursor();\n        chart.cursor.xAxis = dateAxis;\n    \n        this.chart = chart;\n    };\n\n    componentDidUpdate(prevProps) {\n\n        if (this.props.prueba !== prevProps.prueba) {\n            this.chart.data = this.props.data\n\n        }\n    }\n\n        \n    render() {\n\n        return (\n            <div id={this.props.company} style={{ width: \"100%\", height: '300px' }}></div>\n        );\n    }\n\n};\n\nexport default Chart;","import React, {Component} from 'react';\n\nimport Chart from './Chart';\n\nclass TickerDetail extends Component {\n    constructor(props){\n        super(props);\n    \n        this.state = {\n            volume: 0,\n            big: 0,\n            small: 0,\n            last: 0,\n            variation: '0%'\n        };    \n      }\n    //Chart.setOption({series:[{data:props.ticker.update}]})\n\n    // componentDidMount(){\n    //     this.setState({\n    //         volume: this.props.volume,\n    //         big: this.props.big,\n    //         small: this.props.small,\n    //         last: this.props.last\n    //     })\n\n    // }\n\n    componentDidUpdate(prevProps){\n        //console.log(this.props.volume)\n        if (this.props.prueba !== prevProps.prueba) {\n            this.setState({\n                volume: this.props.volume,\n                big: this.props.big,\n                small: this.props.small,\n                last: this.props.last\n            })\n    \n        }\n        if (this.props.last !== prevProps.last) {\n            const porc_var = Math.round(((this.props.last - prevProps.last)/prevProps.last)*10000)/100\n            this.setState({\n                variation: porc_var + \"%\"\n            })\n    \n        }\n    }\n\n    render(){\n        return (\n            <div className=\"row ticker\">\n                <div className=\"col-md-12 border-right company\">\n        \n\n                    <table className=\"ticker-table\">\n                        <tr>\n                    \n                            \n                                <div className='title-table'>\n                                    <h3 className=\"title-ticker\">{this.props.ticker.company} <span className=\"ticker-company\">({this.props.ticker.ticker})</span></h3>\n                                    <h5 className=\"country\">{this.props.ticker.country}</h5>\n                                </div>\n                            \n                        </tr>\n                        <tr>\n                            <div>\n                                <Chart \n                                    key={this.props.ticker.company}\n                                    data = {this.props.ticker.update}\n                                    time = {this.props.ticker.update_time}\n                                    title = {this.props.ticker.company}\n                                    company = {this.props.ticker.company}\n                                    prueba = {this.props.prueba}\n                                    ticker = {this.props.ticker}\n                                />\n                            </div>\n                            <tr>\n                                <th>Volumen Total</th>\n                                <th>Alto Histórico</th>\n                                <th>Bajo Histórico</th>\n                                <th>Último Precio</th>\n                                <th>Variación (%)</th>\n                            </tr>\n                            <tr>\n                                <th>{this.props.volume}</th>\n                                {/* <th>{this.props.buy_volume + this.props.sell_volume}</th> */}\n                                <th>{this.state.big}</th>\n                                <th>{this.state.small}</th>\n                                <th>{this.state.last}</th>\n                                <th>{this.state.variation}</th>\n                            </tr>\n                        </tr>\n                        \n                            \n                    </table>\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default TickerDetail;","import React, {Component} from 'react';\nimport TickerDetail from './TickerDetail';\n\n\nclass ExchangeDetail extends Component {\n    constructor(props){\n        super(props);\n    \n        this.state = {\n            buy_volume: 0,\n            sell_volume: 0,\n            total_volume: 0,\n            actions_count: 0,\n            participation: 0\n        };    \n    }\n    \n    // componentDidMount(){\n    //     this.setState({\n    //         buy_volume: this.props.exchange.buy_volume,\n    //         sell_volume: this.props.exchange.sell_volume,\n    //         total_volume: this.props.exchange.buy_volume + this.props.exchange.sell_volume,\n    //         actions_count: this.props.exchange.stocks.length,\n    //         participation: 0\n    //     })\n\n    // }\n\n    // componentDidUpdate(prevProps){\n    //     if (this.props.buy_sell) {\n           \n    //         console.log(this.props.exchange.buy_volume + this.props.exchange.sell_volume)\n    //     }\n\n    // }\n    \n    render(){\n        return (\n            <div className=\"exchange-map\">\n                <div className=\"row exchange-title-info\">\n                    <div className=\"col-md-6 border-right title-exchange\">\n                        <h1>{this.props.exchange.name}</h1>\n                    </div>\n                    <div className=\"exchange_info col-md-6 border-left\">\n                        <div>\n                            <table className=\"exchange-table\">\n                                <tr>\n                                    <th>Volumen de compra</th>\n                                    <th>Volumen de venta</th>\n                                    <th>Volumen total</th>\n                                    <th>Cantidad de acciones</th>\n                                    <th>Participación de mercado</th>\n            \n                                </tr>\n                                <tr>\n                                    <th>{this.props.exchange.buy_volume}</th>\n                                    <th>{this.props.exchange.sell_volume}</th>\n                                    <th>{this.props.exchange_volume}</th>\n                                    <th>{this.props.exchange.stocks.length}</th>\n                                    <th>{Math.round(((this.props.exchange_volume)/this.props.total_volume)*10000)/100}</th>\n            \n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"table-ticker-div row\">\n                    \n                        {this.props.exchange.stocks.map(company => {\n                            //console.log(company.ticker)\n                            return(\n                                // <div className=\"table-ticker-div\">\n                                <table className=\"table-tickers\">\n                                    <th>\n                                        <TickerDetail\n                                            key = {company.company}\n                                            ticker = {company}\n                                            prueba = {this.props.prueba}\n                                            big = {this.props.bigs[company.ticker]}\n                                            small = {this.props.smalls[company.ticker]}\n                                            last = {this.props.lasts[company.ticker]}\n                                            volume = {this.props.volume[company.ticker]}\n                                            buy_volume = {this.props.buy_volume[company.ticker]}\n                                            sell_volume = {this.props.sell_volume[company.ticker]}\n                                        /> \n                                    </th>\n                                </table>\n                                //  </div>\n                                \n                            )\n                        })}\n                    \n                </div>\n            </div>\n        );\n    }\n}\n\nexport default ExchangeDetail;","import React, {Component} from 'react';\nimport './App.css';\nimport ExchangeDetail from './components/ExchangeDetail';\n\nimport io from 'socket.io-client'\n\n\nconst server = 'wss://le-18262636.bitzonte.com';\n\nconst socket = io(server, {  \n  path: '/stocks'\n});\n\nclass App extends Component{\n\n  constructor(){\n    super();\n\n    this.state = {\n      stock_exchange: {},\n      exchanges: [],\n      is_loading: true,\n      prueba: [],\n      big_updates: {},\n      small_updates: {},\n      last_updates: {},\n      total_volume: {},\n      all_exchange_volume: 0,\n      buy_volume: {},\n      sell_volume: {},\n      exchange_volume: {},\n      button_text: 'Desconectar Socket'\n\n    };    \n  }\n\n  componentDidMount() {\n      // const socket = io(server, {  \n      //   path: '/stocks'\n      // });\n     \n      socket.emit('EXCHANGES')\n      socket.on('EXCHANGES', (data) => {\n        socket.emit('STOCKS');\n        socket.on('STOCKS', (stocks_info) => {\n          const exchange_info = Object.entries(data).map(([key,value])=>{return(value)});\n          exchange_info.map(exchange => {\n            this.setState({exchange_volume: {[exchange.name]: 0, ...this.state.exchange_volume}})\n            exchange.listed_companies.map(comp => {\n              stocks_info.map(stock => {\n                if(comp === stock.company_name) {\n                  this.setState({stock_exchange: {[stock.ticker]: exchange.name, ...this.state.stock_exchange}})\n                }\n              })\n            })\n          })\n\n          this.setState({exchanges: Object.entries(data).map(([key,value])=>{\n              \n              return({\n                name: value.name,\n                exchange_ticker: value.exchange_ticker,\n                stocks: \n                  value.listed_companies.map(company => {\n                    var tick = '';\n                    var money = '';\n                    var country = '';\n                    stocks_info.map(stock => {\n                      if (company === stock.company_name){\n                        tick = stock.ticker;\n                        money = stock.quote_base;\n                        country = stock.country\n                      }\n                    })\n                    return {\n                      company: company,\n                      update: [],\n                      update_time: [],\n                      buy: [],\n                      sell: [],\n                      ticker: tick,\n                      money: money,\n                      country: country\n          \n                    }\n                  }),\n                  buy_volume: 0,\n                  sell_volume: 0,\n              })\n            })\n          });\n        \n          stocks_info.map(stock => {\n            this.setState({\n              big_updates: {[stock.ticker]: 0, ...this.state.big_updates},\n              small_updates: {[stock.ticker]: Infinity, ...this.state.small_updates},\n              last_updates: {[stock.ticker]: 0, ...this.state.last_updates},\n              total_volume: {[stock.ticker]: 0, ...this.state.total_volume},\n              buy_volume: {[stock.ticker]: 0, ...this.state.buy_volume},\n              sell_volume: {[stock.ticker]: 0, ...this.state.sell_volume},\n            })\n          })\n          //console.log(this.state.total_volume)\n\n        \n          \n        \n        \n        });\n      });\n      \n      socket.on('UPDATE', (data) => {\n        var exchange_input = this.state.stock_exchange[data.ticker];\n        this.state.exchanges.map(exchange => {\n          if(exchange.name === exchange_input) {\n            exchange.stocks.map(stock => {\n              if(stock.ticker === data.ticker) {\n                stock.update.push({date: data.time, value: data.value }) //update.length - 1\n              }\n            })\n          }\n        });\n\n        \n        this.state.last_updates[data.ticker] = data.value;\n        if(data.value > this.state.big_updates[data.ticker]) {\n          this.state.big_updates[data.ticker] = data.value;\n        } \n        if(data.value < this.state.small_updates[data.ticker]) {\n          this.state.small_updates[data.ticker] = data.value;\n        }\n\n        this.setState({prueba: [{date: data.time, value: data.value }, ...this.state.prueba] })\n\n        //console.log(this.state.prueba)\n\n        \n        \n\n        \n\n      });\n\n      socket.on('BUY', (data) => {\n        var exchange_input = this.state.stock_exchange[data.ticker];\n        \n        if(isNaN(this.state.total_volume[data.ticker])){\n          this.state.total_volume[data.ticker] = 0;\n        }\n        this.state.total_volume[data.ticker] += data.volume;\n        this.state.buy_volume[data.ticker] += data.volume;\n        var exchange_input = this.state.stock_exchange[data.ticker];\n        this.state.exchanges.map(exchange => {\n          if(exchange.name === exchange_input) {\n            if(exchange.name === exchange_input) {\n              exchange.buy_volume += data.volume\n            }\n          }\n        });\n        this.state.exchange_volume[exchange_input] += data.volume;\n        this.state.all_exchange_volume += data.volume;\n      \n      });\n\n      socket.on('SELL', (data) => {\n        var exchange_input = this.state.stock_exchange[data.ticker];\n      \n        if(isNaN(this.state.total_volume[data.ticker])){\n          this.state.total_volume[data.ticker] = 0;\n        }\n        this.state.total_volume[data.ticker] += data.volume;\n        this.state.sell_volume[data.ticker] += data.volume;\n        var exchange_input = this.state.stock_exchange[data.ticker];\n        this.state.exchanges.map(exchange => {\n          if(exchange.name === exchange_input) {\n              exchange.sell_volume += data.volume\n            }\n        \n          }\n        );\n        this.state.exchange_volume[exchange_input] += data.volume;\n        this.state.all_exchange_volume += data.volume;\n      });\n      \n  }\n\n  control_socket = () => {\n    if(socket.connected){\n      socket.disconnect()\n      this.setState({button_text: 'Reconectar Socket'})\n    }\n    else {\n      socket.connect()\n      this.setState({button_text: 'Desconectar Socket'});\n    }\n  }\n\n  \n  \n  render() {\n\n\n\n    return(\n      <div className=\"App\">\n          <div className=\"socket-control\">\n            <h2>Tarea 3 - Taller de Integración</h2>\n            <button className=\"button\" onClick={this.control_socket}>{this.state.button_text}</button>\n          </div>\n          {this.state.exchanges.map(exchange => {\n            return(\n              <div className=\"exchange\" key={exchange.name}>\n                <ExchangeDetail\n                  key={exchange.name} \n                  exchange = {exchange}\n                  prueba = {this.state.prueba}\n                  bigs = {this.state.big_updates}\n                  smalls = {this.state.small_updates}\n                  lasts = {this.state.last_updates}\n                  volume = {this.state.total_volume}\n                  total_volume = {this.state.all_exchange_volume}\n                  buy_volume = {this.state.buy_volume}\n                  sell_volume = {this.state.sell_volume}\n                  exchange_volume = {this.state.exchange_volume[exchange.name]}\n                />\n              </div>\n            )\n          })}\n\n      </div>\n    );\n  }\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}